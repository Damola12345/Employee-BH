<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8"/>
    <title>ReactJS + Spring Data REST</title>
    <link rel="stylesheet" href="main.css" />
</head>
<body>

	<div>
		<form id="login-form" action="#" method="post">
			<input type="text" name="username" placeholder="Username" required/>
			<input type="text" name="password" placeholder="Password" type="password" required/>
			<input type="submit" value="Log In"/>
		</form>
	</div>

    <!-- tag::logout[] -->
    <div>
        Hello, <span id="managername">user</span>.
        <form id="logout-form" action="#" method="post">
            <input type="submit" value="Log Out"/>
        </form>
    </div>
    <!-- end::logout[] -->

    <div id="react"></div>

    <script src="built/bundle.js"></script>

		<script>
			/** FORM SUBMISSIONS */
			const loginForm = document.getElementById("login-form");
			const logoutForm = document.getElementById("logout-form");

			loginForm.addEventListener('submit', function(e) {
				e.preventDefault();

				console.log(e);

				const username = e.target[0].value;
				const password = e.target[1].value;

				window.localStorage.setItem(
					"auth",
					window.btoa(username + ":" + password),
				);

				window.location.reload();
			});

			logoutForm.addEventListener('submit', function(e) { 
				e.preventDefault();

				console.log(e);

				window.localStorage.removeItem('auth');

				window.location.reload();
			});
		</script>

</body>
</html>
